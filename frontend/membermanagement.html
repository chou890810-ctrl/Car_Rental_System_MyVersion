<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <title>會員資料管理 - GOTO Rent</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>

    <style>
        body {
            padding-top: 70px;
            background-color: #f4f7f9;
        }

        .search-box {
            background: white;
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .table-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
        }

        .table thead th {
            background-color: #e9ecef;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="employee.html">員工系統 - 會員查詢</a>
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <button class="btn btn-outline-danger btn-sm" onclick="handleLogout()">登出</button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container py-4">
        <h2>會員資料查詢</h2>
        <div class="search-box">
            <form onsubmit="return false">
                <div class="row g-3 align-items-end">
                    <div class="col-md-3"><label class="form-label">會員編號:</label><input type="text" id="searmemberid"
                            class="form-control" /></div>
                    <div class="col-md-3"><label class="form-label">姓名：</label><input type="text" id="searname"
                            class="form-control" /></div>
                    <div class="col-md-3"><label class="form-label">身分證字號：</label><input type="text" id="searidnumber"
                            class="form-control" /></div>
                    <div class="col-md-3"><label class="form-label">電話：</label><input type="text" id="searphone"
                            class="form-control" /></div>
                    <div class="col-12 text-end">
                        <button id="search" type="button" class="btn btn-primary">查詢</button>
                    </div>
                </div>
            </form>
        </div>

        <div class="table-container">
            <h5>查詢結果</h5>
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>會員編號</th>
                        <th>姓名</th>
                        <th>身分證字號</th>
                        <th>手機</th>
                        <th>生日</th>
                        <th>email</th>
                        <th>地址</th>
                        <th>註冊日期</th>
                    </tr>
                </thead>
                <tbody id="memTable">
                </tbody>
            </table>
        </div>
    </div>

    <script src="js/member.js"></script>
    <script src="js/employee.js"></script>

    <script>
        // ⭐ 頁面載入時檢查權限
        window.onload = async function () {
            const valid = await checkLoginStatusAsync();
            if (!valid) {
                alert("權限不足或未登入");
                location.href = "index.html";
            }
        };

        // 綁定查詢事件 (在 employee.js 裡)
        $(document).ready(function () {
            // ⭐ 確保 employee.js 中的 search 函數被正確觸發
            $("#search").click(function () {
                // 這裡應該呼叫 member.js 裡的 searchmember 函數
                searchmember();
            });
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>