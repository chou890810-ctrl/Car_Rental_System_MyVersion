<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <title>訂單資料管理 - GOTO Rent</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>

    <style>
        body {
            padding-top: 70px;
            background-color: #f4f7f9;
        }

        .search-box {
            background: white;
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .table-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
        }

        .table thead th {
            background-color: #e9ecef;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="employee.html">員工系統 - 訂單查詢</a>
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <button class="btn btn-outline-danger btn-sm" onclick="handleLogout()">登出</button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container py-4">
        <h2>訂單資料管理</h2>
        <div class="search-box">
            <form onsubmit="return false">
                <div class="row g-3 align-items-end">
                    <div class="col-md-3"><label class="form-label">會員編號:</label><input type="text" id="memberid_od"
                            class="form-control" /></div>
                    <div class="col-md-3"><label class="form-label">會員姓名：</label><input type="text" id="membername_od"
                            class="form-control" /></div>
                    <div class="col-md-3"><label class="form-label">身分證字號：</label><input type="text" id="idnumber_od"
                            class="form-control" /></div>
                    <div class="col-md-3"><label class="form-label">電話：</label><input type="text" id="phone_od"
                            class="form-control" /></div>

                    <div class="col-md-4">
                        <label class="form-label">取車據點:</label>
                        <select id="pickupsta_od" class="form-select"></select>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">取車日期範圍：</label>
                        <div class="input-group">
                            <input type="date" id="pickupdatestart_od" class="form-control" />
                            <span class="input-group-text">~</span>
                            <input type="date" id="pickupdateend_od" class="form-control" />
                        </div>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">訂單狀態：</label><input type="text" id="odstatus_od"
                            class="form-control" />
                    </div>

                    <div class="col-md-2 text-end">
                        <button id="searchorder" type="button" class="btn btn-primary w-100">查詢</button>
                    </div>
                </div>
            </form>
        </div>

        <div class="table-container">
            <h5>查詢結果</h5>
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>訂單編號</th>
                        <th>會員編號</th>
                        <th>會員姓名</th>
                        <th>取車日期</th>
                        <th>還車日期</th>
                        <th>訂單日期</th>
                        <th>取車據點</th>
                        <th>還車據點</th>
                        <th>訂單金額</th>
                        <th>訂單狀態</th>
                    </tr>
                </thead>
                <tbody id="allorderTable">
                </tbody>
            </table>
        </div>
    </div>

    <script src="js/member.js"></script>
    <script src="js/employee.js"></script>

    <script>
        // ⭐ 頁面載入時檢查權限 (需在 employee.js 之前)
        window.onload = async function () {
            const valid = await checkLoginStatusAsync();
            if (!valid) {
                alert("權限不足或未登入");
                location.href = "index.html";
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>